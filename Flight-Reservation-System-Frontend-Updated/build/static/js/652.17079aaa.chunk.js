"use strict";(self.webpackChunkflight_booking_system=self.webpackChunkflight_booking_system||[]).push([[652],{9652:(e,a,t)=>{t.r(a),t.d(a,{default:()=>R});var n=t(5043),r=t(6632),i=t(4102),l=t(9557),s=t(1551),o=t(495),d=t(8073),c=t(3083),u=t(7767),h=t(8655),g=t(105),p=t(6187),m=t(3817),v=t(7479),A=t(7673),x=t(8425),b=t(7503),j=t(9691),S=t(8885),y=t(2703),k=t(749),f=t(8219),C=t(6962),T=t(8325),N=t(5447),w=t(5332),D=t(9610),I=t(8023),L=t(579);const P=(0,s.A)((()=>({textAlign:{textAlign:"right"},textAlignCenter:{textAlign:"center"},cardContainer:{marginBottom:5}}))),B=e=>{var a,t;const{flightList:r,bookNow:i}=e,s=P(),[o,c]=(0,n.useState)(0),[u,h]=(0,n.useState)(5),[m,v]=(0,n.useState)(!1),[A,B]=(0,n.useState)(""),[E,F]=(0,n.useState)(""),[R,_]=(0,n.useState)(""),[O,G]=(0,n.useState)(""),[K,W]=(0,n.useState)(""),[M,U]=(0,n.useState)(""),[H,J]=(0,n.useState)(""),[$,q]=(0,n.useState)(0),z=(0,l.W6)();let Y=null;const{userInfoSession:Q,updateUserInfoSession:V,appendToUserInfoSession:X}=(0,D.q)();(0,n.useEffect)((()=>{Q&&v(!0)}),[Q]);const Z=(0,N.mg)({onSuccess:async e=>{try{const a=await w.A.getUserInfo(e.access_token);v(!0),V({...a,selectedFlightNumber:A,departureCity:E,arrivalCity:R,departureDate:O,departureTime:K,arrivalDate:M,arrivalTime:H});const t=await I.A.selectFlight(a.userId,A,E,R,O,K,M,H);console.log("Select flight response: ",t),z.push("/seat-selection")}catch(a){console.error("Error fetching user info:",a)}}});return null!==r&&void 0!==r&&r.loading?Y=(0,L.jsx)(x.A,{}):(null===r||void 0===r||null===(a=r.result)||void 0===a?void 0:a.length)>0?Y=(0,L.jsxs)(b.A,{children:[(0,L.jsx)(j.A,{children:r.result.slice(o*u,o*u+u).map(((e,a)=>{const t=(null===e||void 0===e?void 0:e.minimumSeatPrice)+Math.floor(399*$)-199;return(0,L.jsx)(S.A,{children:(0,L.jsx)(y.A,{children:(0,L.jsx)(k.A,{className:s.cardContainer,children:(0,L.jsx)(f.A,{children:(0,L.jsxs)(d.A,{container:!0,children:[(0,L.jsx)(d.A,{item:!0,xs:2,children:(0,L.jsx)(C.A,{src:e.airlineLogo,alt:e.airlineName})}),(0,L.jsxs)(d.A,{item:!0,xs:2,className:s.textAlignCenter,children:[(0,L.jsx)(p.A,{align:"center",children:e.departureTime}),(0,L.jsx)(p.A,{variant:"caption",children:e.departure})]}),(0,L.jsxs)(d.A,{item:!0,xs:2,className:s.textAlignCenter,children:[(0,L.jsx)(p.A,{children:e.airlineName}),(0,L.jsx)(p.A,{variant:"caption",children:e.flightNumber}),(0,L.jsx)("br",{}),(0,L.jsx)(p.A,{variant:"caption",children:"0"===e.noOfStops?"No Stops":"Non-Stop"})]}),(0,L.jsxs)(d.A,{item:!0,xs:2,className:s.textAlignCenter,children:[(0,L.jsx)(p.A,{children:e.arrivalTime}),(0,L.jsx)(p.A,{variant:"caption",children:e.arrival})]}),(0,L.jsx)(d.A,{item:!0,xs:4,className:s.textAlign,children:(0,L.jsx)(g.A,{variant:"contained",style:{backgroundColor:"black",color:"white"},onClick:()=>(async e=>{if(B(e.flightNumber),F(e.departure),_(e.arrival),G(e.departureDate),W(e.departureTime),J(e.arrivalTime),U(e.arrivalDate),Q){const a=await I.A.selectFlight(Q.userId,e.flightNumber,e.departure,e.arrival,e.departureDate,e.departureTime,e.arrivalDate,e.arrivalTime);console.log("Select flight response: ",a),X({selectedFlightNumber:e.flightNumber,departureCity:e.departure,arrivalCity:e.arrival,departureDate:e.departureDate,departureTime:e.departureTime,arrivalDate:e.arrivalDate,arrivalTime:e.arrivalTime}),z.push("/seat-selection")}else Z()})(e),children:`\u20b9 ${t}`})})]})})})})},a)}))}),(0,L.jsx)(T.A,{rowsPerPageOptions:[5,10,25],component:"div",count:r.result.length,rowsPerPage:u,page:o,onChangePage:(e,a)=>c(a),onChangeRowsPerPage:e=>{h(parseInt(e.target.value,10)),c(0)}})]}):0===(null===r||void 0===r||null===(t=r.result)||void 0===t?void 0:t.length)?Y=(0,L.jsx)(p.A,{children:"No Records Found.."}):null!==r&&void 0!==r&&r.error&&(Y=(0,L.jsx)(p.A,{children:"Unable to fetch Data..."})),(0,n.useEffect)((()=>{q(Math.random())}),[]),(0,L.jsx)(d.A,{container:!0,children:(0,L.jsx)(d.A,{item:!0,xs:12,children:Y})})},E=[...JSON.parse('[{"id":"1","name":"Mumbai","state":"Maharashtra"},{"id":"2","name":"New Delhi","state":"New Delhi"},{"id":"3","name":"Bengaluru","state":"Karnataka"},{"id":"4","name":"Kolkata","state":"West Bengal"},{"id":"5","name":"Ahemdabad","state":"Gujarat"},{"id":"6","name":"Jaipur","state":"Rajasthan"},{"id":"7","name":"Chennai","state":"Tamil Nadu"},{"id":"8","name":"Hyderabad","state":"Telangana"},{"id":"9","name":"Kochi","state":"Kerala"},{"id":"10","name":"Pune","state":"Maharashtra"},{"id":"11","name":"Goa","state":"Goa"},{"id":"12","name":"Chandigarh","state":"Chandigarh"},{"id":"13","name":"Amritsar","state":"Punjab"},{"id":"14","name":"Bhubaneswar","state":"Odisha"},{"id":"15","name":"Thiruvananthapuram","state":"Kerala"},{"id":"16","name":"Kozhikode","state":"Kerala"},{"id":"17","name":"Lucknow","state":"Uttar Pradesh"},{"id":"18","name":"Ranchi","state":"Jharkhand"},{"id":"19","name":"Siliguri","state":"West Bengal"},{"id":"20","name":"Tirupati","state":"Andhra Pradesh"}]')],F=(0,s.A)((e=>({filterContainer:{padding:e.spacing(),margin:"auto",maxWidth:600,background:"rgba(0, 0, 0, 0.87)",borderRadius:8},centerContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:e.spacing(5),width:"100%"},inputContainer:{marginBottom:e.spacing(2)},centerButton:{display:"flex",justifyContent:"center"},paper:{padding:e.spacing(5),margin:"auto",maxWidth:800,background:"none",boxShadow:"none"}}))),R=e=>{const[a,t]=(0,n.useState)(null),[s,x]=(0,n.useState)(null),[b,j]=(0,n.useState)(""),[S,y]=(0,n.useState)(""),[k,f]=(0,n.useState)("one"),[C,T]=(0,n.useState)(!1),[N,w]=(0,n.useState)(!1),D=(0,i.wA)(),I=(0,l.W6)(),P=(0,i.d4)((e=>e.flightSearch.searchList)),R=F();(0,n.useEffect)((()=>{D({type:A.A.RESET_FLIGHT_LIST})}),[]);const _=E.filter((e=>!a||e.name!==a.name)),O=E.filter((e=>!s||e.name!==s.name));return(0,L.jsx)(o.A,{elevation:0,className:R.paper,children:(0,L.jsxs)(d.A,{container:!0,className:R.centerContainer,children:[(0,L.jsxs)(r.A,{row:!0,onChange:e=>{f(e.target.value)},value:k,children:[(0,L.jsx)(c.A,{value:"one",control:(0,L.jsx)(u.A,{style:{color:"black"}}),label:"One Way"}),(0,L.jsx)(c.A,{value:"both",control:(0,L.jsx)(u.A,{style:{color:"black"}}),label:"Round Trip"})]}),(0,L.jsx)(m.Ay,{value:a,onChange:(e,a)=>{t(a)},getOptionLabel:e=>e.name,options:O,style:{width:300,padding:"8px"},renderInput:e=>(0,L.jsx)(h.A,{...e,label:"Source City",variant:"outlined"})}),(0,L.jsx)(m.Ay,{value:s,onChange:(e,a)=>{x(a)},getOptionLabel:e=>e.name,options:_,style:{width:300,padding:"8px"},renderInput:e=>(0,L.jsx)(h.A,{...e,label:"Destination City",variant:"outlined"})}),(0,L.jsx)(h.A,{label:"Journey Date",type:"date",value:b,onChange:e=>{j(e.target.value)},variant:"outlined",style:{width:300,padding:"8px"},InputLabelProps:{shrink:!0},inputProps:{min:(()=>{const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`})()}}),"BOTH"===(null===k||void 0===k?void 0:k.toUpperCase())&&(0,L.jsx)(h.A,{label:"Return Date",type:"date",value:S,onChange:e=>{y(e.target.value)},variant:"outlined",style:{width:300,padding:"8px"},InputLabelProps:{shrink:!0},inputProps:{min:b}}),(0,L.jsxs)("div",{className:R.centerButton,children:[(0,L.jsx)(g.A,{variant:"contained",style:{backgroundColor:"black",color:"white",borderRadius:4,marginRight:8},className:R.filterContainer,onClick:()=>{var e,t;const n={source:null===a||void 0===a?void 0:a.name,destination:null===s||void 0===s?void 0:s.name,deptDate:b,returnDate:S,tripType:k};if((null===n||void 0===n||null===(e=n.source)||void 0===e?void 0:e.toLowerCase())===(null===n||void 0===n||null===(t=n.destination)||void 0===t?void 0:t.toLowerCase()))return w(!0),void T(!1);w(!1),D({type:A.A.RESET_FLIGHT_LIST}),D({type:A.A.GET_FLIGHT_LIST,payload:n}),T(!0)},disabled:(0,v.b0)(a,s,b,S,k),children:"Search Flight"}),(0,L.jsx)(g.A,{variant:"contained",onClick:()=>{t(null),x(null),j(""),y("")},className:R.clearButton,children:"Clear Fields"})]}),N&&(0,L.jsx)(p.A,{variant:"body1",color:"error",children:"Source and Destination City cannot be the same"}),C&&(0,L.jsx)(B,{flightList:P,bookNow:e=>{let a;D({type:A.A.SET_BOOKING_DETAILS,payload:e}),clearTimeout(a),a=setTimeout((()=>{I.push("/flight-booking")}),100)}})]})})}},8023:(e,a,t)=>{t.d(a,{A:()=>i});var n=t(9217),r=t(6213);class i{}i.getAllSeats=e=>{const a=n.b+"booking/getAllSeats/"+e;return r.A.get(a).then((e=>e.data)).catch((e=>(console.log("Error in Backend call, sending back empty seats",e),[])))},i.bookSeats=(e,a,t,i,l)=>{const s=n.b+"booking/bookSeats/"+e+"/"+a,o={seatNumber:t,seatClass:i,price:l,booked:!1};return r.A.post(s,o).then((e=>e.data)).catch((e=>(console.log("Error in Backend call, sending back empty booking",e),null)))},i.createReservation=(e,a,t,i)=>{const l=n.b+"payment/createReservation/"+e+"/"+a+"/"+t,s={totalTravelFair:i};return r.A.post(l,s).then((e=>e.data)).catch((e=>(console.log("Error in Backend call, sending back empty reservation",e),null)))},i.selectFlight=(e,a,t,i,l,s,o,d)=>{const c=n.b+"booking/bookFlights/"+e,u={flightNumber:a,departure:t,arrival:i,departureDate:l,departureTime:s,arrivalDate:o,arrivalTime:d,seatAvailability:30};return r.A.post(c,u).then((e=>e.data)).catch((e=>(console.log("Error in Backend call, sending back empty select flight",e),null)))}}}]);
//# sourceMappingURL=652.17079aaa.chunk.js.map