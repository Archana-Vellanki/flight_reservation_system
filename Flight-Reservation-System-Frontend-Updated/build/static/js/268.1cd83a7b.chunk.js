"use strict";(self.webpackChunkflight_booking_system=self.webpackChunkflight_booking_system||[]).push([[268],{1268:(e,t,s)=>{s.r(t),s.d(t,{default:()=>v});var a=s(5043),l=s(9557),r=s(105),n=s(5115),o=s(5883),i=s(3867),c=s(419),d=s(2907),h=s(4975),m=s(579);const u=e=>{let{title:t,message:s,open:a,onClose:l}=e;return(0,m.jsxs)(n.A,{open:a,onClose:l,children:[(0,m.jsxs)(o.A,{style:{textAlign:"center",background:"black",color:"white",padding:"10px 0"},children:[(0,m.jsx)(h.A,{style:{fontSize:"2rem",verticalAlign:"middle",marginRight:"5px",color:"white"}}),(0,m.jsx)("span",{style:{color:"white"},children:t})]}),(0,m.jsx)(i.A,{style:{background:"white",padding:"20px"},children:(0,m.jsx)(c.A,{style:{fontSize:"16px",textAlign:"center"},children:s})}),(0,m.jsx)(d.A,{style:{justifyContent:"center",background:"white",padding:"10px"},children:(0,m.jsx)(r.A,{onClick:l,color:"primary",variant:"contained",style:{background:"black",color:"white"},children:"OK"})})]})};var x=s(9610),p=s(8023);const g=Math.floor(101*Math.random());const v=function(){const e=(0,l.W6)(),[t,s]=(0,a.useState)(""),[n,o]=(0,a.useState)(""),[i,c]=(0,a.useState)(""),[d,h]=(0,a.useState)(""),[v,f]=(0,a.useState)(""),[j,y]=(0,a.useState)(""),[b,k]=(0,a.useState)(""),[A,N]=(0,a.useState)(""),[C,S]=(0,a.useState)(!1),[w,M]=(0,a.useState)(!1),{userInfoSession:B,appendToUserInfoSession:I}=(0,x.q)(),T=B.amountToBePaid,Y=T+g,_=async e=>{e.preventDefault();const s=t.replace(/\s/g,"");let a="";/^\d{16}$/.test(s)||(a="Invalid card number");let l="";/^[A-Za-z\s]+$/.test(d)||(l="Invalid name");let r="";/^\d{3}$/.test(i)||(r="Invalid CVV");const o=new Date,c=o.getFullYear()%100,h=o.getMonth()+1,[m,u]=n.split("/");let x="";if(/^(0[1-9]|1[0-2])\/\d{2}$/.test(n)?(u<c||u===c&&m<h)&&(x="Expiry date must be in the future"):x="Invalid expiry date (MM/YY)",f(a),y(l),k(r),N(x),a||l||r||x)return S(!1),!1;(async()=>{const e=await p.A.createReservation(B.selectedFlightNumber,B.userId,B.selectedSeat,B.amountToBePaid);console.log("Seat reservation info from Backend: ",e),e.bookingId?S(!0):M(!0)})(),I({seatPrice:g})},D=v?(0,m.jsx)("div",{className:"error-message",style:{color:"red"},children:v}):null,E=j?(0,m.jsx)("div",{className:"error-message",style:{color:"red"},children:j}):null,R=b?(0,m.jsx)("div",{className:"error-message",style:{color:"red"},children:b}):null,F=A?(0,m.jsx)("div",{className:"error-message",style:{color:"red"},children:A}):null;return(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"flight-details-container",children:[(0,m.jsx)("h2",{children:"Cost Breakdown"}),(0,m.jsx)("table",{children:(0,m.jsxs)("tbody",{children:[(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:"Ticket Fare (Inclusive of all Taxes)"}),(0,m.jsxs)("td",{children:["\u20b9",T]})]}),(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:"Seat Selection Price"}),(0,m.jsxs)("td",{children:["\u20b9",g]})]}),(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:"Amount"}),(0,m.jsxs)("td",{children:["\u20b9",Y]})]})]})})]}),(0,m.jsx)("div",{className:"container",children:(0,m.jsx)("div",{className:"row",children:(0,m.jsx)("div",{className:"col-12",children:(0,m.jsx)("div",{className:"card p-3",children:(0,m.jsx)("div",{className:"card-body border p-0",children:(0,m.jsx)("div",{className:"collapse show p-3 pt-0",children:(0,m.jsx)("div",{className:"row",children:(0,m.jsx)("div",{className:"col-12",children:(0,m.jsx)("form",{action:"",className:"form",children:(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:"col-12",children:(0,m.jsxs)("div",{className:"form__div",children:[(0,m.jsx)("input",{type:"text",className:"form-control",placeholder:"Card Number",value:t,onChange:e=>{const t=e.target.value.replace(/\D/g,"").substring(0,16).replace(/(\d{4})/g,"$1 ").trim();s(t),f("")}}),D]})}),(0,m.jsx)("div",{className:"col-6",children:(0,m.jsxs)("div",{className:"form__div",style:{display:"flex"},children:[(0,m.jsxs)("div",{style:{flex:1,marginRight:"10px"},children:[(0,m.jsx)("div",{children:(0,m.jsx)("input",{type:"text",className:"form-control",placeholder:"MM / YY",value:n,onChange:e=>{const t=e.target.value.replace(/\D/g,"").substring(0,4).replace(/(\d{2})(\d{0,2})/,"$1/$2"),[s,a]=t.split("/"),l=s>="01"&&s<="12",r=a>="23"&&a<="28";o(t),N(l&&r?"":"Invalid expiry date (MM / YY)")}})}),F]}),(0,m.jsxs)("div",{style:{flex:1},children:[(0,m.jsx)("div",{children:(0,m.jsx)("input",{type:"text",className:"form-control",placeholder:"CVV",value:i,onChange:e=>{const t=e.target.value.replace(/\D/g,"").substring(0,3);c(t),k(3!==t.length?"CVV must be a 3-digit number":"")}})}),R]})]})}),(0,m.jsx)("div",{className:"col-12",children:(0,m.jsxs)("div",{className:"form__div",children:[(0,m.jsx)("input",{type:"text",className:"form-control",placeholder:"Firstname Lastname",value:d,onChange:e=>{h(e.target.value),y("")}}),E]})}),(0,m.jsx)("div",{style:{marginBottom:"20px"}}),(0,m.jsx)("div",{className:"col-12",children:(0,m.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,m.jsx)(r.A,{style:{backgroundColor:"#000",color:"#fff",flex:1,marginRight:"5px"},onClick:_,children:"Confirm Payment"}),(0,m.jsx)(r.A,{style:{backgroundColor:"#ccc",color:"#000",flex:1,marginLeft:"5px"},onClick:()=>{s(""),o(""),c(""),h(""),f(""),y(""),k(""),N("")},children:"Clear Selection"})]})})]})})})})})})})})})}),(0,m.jsx)(u,{title:"Payment Successful",message:"Your payment was successful!",open:C,onClose:()=>{S(!1),C&&e.push("/confirmation")}}),(0,m.jsx)(u,{title:"Payment Failed! Please Retry",message:"Your payment was denied please retry or use different card!",open:w,onClose:_})]})}},8023:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(9217),l=s(6213);class r{}r.getAllSeats=e=>{const t=a.b+"booking/getAllSeats/"+e;return l.A.get(t).then((e=>e.data)).catch((e=>(console.log("Error in Backend call, sending back empty seats",e),[])))},r.bookSeats=(e,t,s,r,n)=>{const o=a.b+"booking/bookSeats/"+e+"/"+t,i={seatNumber:s,seatClass:r,price:n,booked:!1};return l.A.post(o,i).then((e=>e.data)).catch((e=>(console.log("Error in Backend call, sending back empty booking",e),null)))},r.createReservation=(e,t,s,r)=>{const n=a.b+"payment/createReservation/"+e+"/"+t+"/"+s,o={totalTravelFair:r};return l.A.post(n,o).then((e=>e.data)).catch((e=>(console.log("Error in Backend call, sending back empty reservation",e),null)))},r.selectFlight=(e,t,s,r,n,o,i,c)=>{const d=a.b+"booking/bookFlights/"+e,h={flightNumber:t,departure:s,arrival:r,departureDate:n,departureTime:o,arrivalDate:i,arrivalTime:c,seatAvailability:30};return l.A.post(d,h).then((e=>e.data)).catch((e=>(console.log("Error in Backend call, sending back empty select flight",e),null)))}},419:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(8168),l=s(5043),r=s(7573),n=s(6187),o=l.forwardRef((function(e,t){return l.createElement(n.A,(0,a.A)({component:"p",variant:"body1",color:"textSecondary",ref:t},e))}));const i=(0,r.A)({root:{marginBottom:12}},{name:"MuiDialogContentText"})(o)},3867:(e,t,s)=>{s.d(t,{A:()=>c});var a=s(8168),l=s(45),r=s(5043),n=s(3024),o=s(7573),i=r.forwardRef((function(e,t){var s=e.classes,o=e.className,i=e.dividers,c=void 0!==i&&i,d=(0,l.A)(e,["classes","className","dividers"]);return r.createElement("div",(0,a.A)({className:(0,n.A)(s.root,o,c&&s.dividers),ref:t},d))}));const c=(0,o.A)((function(e){return{root:{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"8px 24px","&:first-child":{paddingTop:20}},dividers:{padding:"16px 24px",borderTop:"1px solid ".concat(e.palette.divider),borderBottom:"1px solid ".concat(e.palette.divider)}}}),{name:"MuiDialogContent"})(i)},4975:(e,t,s)=>{s.d(t,{A:()=>l});var a=s(5043);const l=(0,s(4794).A)(a.createElement("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline")}}]);
//# sourceMappingURL=268.1cd83a7b.chunk.js.map