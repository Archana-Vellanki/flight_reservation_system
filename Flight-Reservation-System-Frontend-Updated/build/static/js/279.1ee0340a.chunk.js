"use strict";(self.webpackChunkflight_booking_system=self.webpackChunkflight_booking_system||[]).push([[279],{9279:(e,a,t)=>{t.r(a),t.d(a,{default:()=>T});var r=t(5043),s=t(9557),l=t(8073),i=t(495),n=t(6187),o=t(8168),c=t(45),d=t(3024),m=t(7573),h=t(2454),g=r.forwardRef((function(e,a){var t=e.absolute,s=void 0!==t&&t,l=e.classes,i=e.className,n=e.component,m=void 0===n?"hr":n,h=e.flexItem,g=void 0!==h&&h,u=e.light,p=void 0!==u&&u,x=e.orientation,b=void 0===x?"horizontal":x,f=e.role,j=void 0===f?"hr"!==m?"separator":void 0:f,N=e.variant,v=void 0===N?"fullWidth":N,A=(0,c.A)(e,["absolute","classes","className","component","flexItem","light","orientation","role","variant"]);return r.createElement(m,(0,o.A)({className:(0,d.A)(l.root,i,"fullWidth"!==v&&l[v],s&&l.absolute,g&&l.flexItem,p&&l.light,"vertical"===b&&l.vertical),role:j,ref:a},A))}));const u=(0,m.A)((function(e){return{root:{height:1,margin:0,border:"none",flexShrink:0,backgroundColor:e.palette.divider},absolute:{position:"absolute",bottom:0,left:0,width:"100%"},inset:{marginLeft:72},light:{backgroundColor:(0,h.Rv)(e.palette.divider,.08)},middle:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},vertical:{height:"100%",width:1},flexItem:{alignSelf:"stretch",height:"auto"}}}),{name:"MuiDivider"})(g);var p=t(105),x=t(3359),b=t(7503),f=t(4759),j=t(8885),N=t(2703),v=t(9691),A=t(5115),y=t(5883),k=t(3867),C=t(2907),w=t(419),D=t(8011),S=t(6213);const I="http://localhost:8080/booking";const F=new class{getFlightByArrivalAndDeparture(e,a,t){return S.A.get(I+"/getFlightsOnArrivalAndDeparture/"+e+"/"+a+"/"+t)}getAllSeatsFromAFlight(e){return S.A.get(I+"/getAllSeats/"+e)}bookFlightForAPassenger(e,a){return S.A.post(I+"/bookFlights/"+e,a)}bookSeatForAPassenger(e,a,t){return S.A.post(I+"/bookSeats/"+e+"/"+a,t)}};var R=t(579);const T=e=>{const{bookingId:a}=(0,s.g)(),{userId:t}=(0,s.g)(),[o,c]=(0,r.useState)(),[d,m]=(0,r.useState)(!1),[h,g]=(0,r.useState)(!1),[S,I]=(0,r.useState)(),[T,B]=(0,r.useState)(),[E,O]=(0,r.useState)(),[z,_]=(0,r.useState)(!1),[L,M]=(0,r.useState)(!1),[P,V]=(0,r.useState)({firstName:(null===o||void 0===o?void 0:o.passenger.firstName)||"",lastName:(null===o||void 0===o?void 0:o.passenger.lastName)||"",emailId:(null===o||void 0===o?void 0:o.passenger.emailId)||""}),[W,U]=(0,r.useState)(!1),[Y,J]=(0,r.useState)();(0,r.useEffect)((()=>{console.log("view"),D.A.getOneReservation(a,t).then((e=>{console.log(e.data),c(e.data),I(e.data.passenger.flightDetails[0].flightNumber),O(e.data.passenger.flightDetails[0].seat),V(e.data.passenger.firstName,e.data.passenger.lastName,e.data.passenger.emailId)}))}),[]);const K=(e,a)=>{V({...P,[e]:a})},q=(e,a,t)=>{const r={...o,passenger:{...o.passenger,flightDetails:[{...o.passenger.flightDetails[0],seat:{seatNumber:e,seatClass:a,price:t}}],payment:[{paymentId:o.passenger.payment[0].paymentId,totalTravelFair:t}]}};c(r)},G=()=>{U(!1)},H=()=>{m(!1)};return(0,R.jsxs)(l.A,{container:!0,spacing:2,children:[o&&(0,R.jsx)(l.A,{item:!0,xs:12,children:(0,R.jsxs)(i.A,{style:{padding:"20px"},children:[(0,R.jsx)("div",{style:{textAlign:"center",marginBottom:"20px"},children:(0,R.jsx)(n.A,{variant:"h3",children:"Booking Details"})}),(0,R.jsx)(u,{style:{margin:"10px 0"}}),(0,R.jsxs)("div",{className:"confirmation-container",children:[(0,R.jsx)("table",{className:"confirmation-table",children:(0,R.jsxs)("tbody",{children:[(0,R.jsxs)("tr",{className:"confirmation-table-row",children:[(0,R.jsx)("td",{className:"confirmation-table-header first-column",children:(0,R.jsx)("strong",{children:"Booking ID"})}),(0,R.jsx)("td",{className:"confirmation-table-header second-column",children:o.bookingId})]}),(0,R.jsxs)("tr",{className:"confirmation-table-row",children:[(0,R.jsx)("td",{className:"confirmation-table-header first-column",children:(0,R.jsx)("strong",{children:"Flight Number"})}),(0,R.jsx)("td",{className:"confirmation-table-header second-column",children:o.flightNumber})]}),(0,R.jsxs)("tr",{className:"confirmation-table-row",children:[(0,R.jsx)("td",{className:"confirmation-table-header first-column",children:(0,R.jsx)("strong",{children:"Departure"})}),(0,R.jsx)("td",{className:"confirmation-table-header second-column",children:o.departure})]}),(0,R.jsxs)("tr",{className:"confirmation-table-row",children:[(0,R.jsx)("td",{className:"confirmation-table-header first-column",children:(0,R.jsx)("strong",{children:"Arrival"})}),(0,R.jsx)("td",{className:"confirmation-table-header second-column",children:o.arrival})]}),(0,R.jsxs)("tr",{className:"confirmation-table-row",children:[(0,R.jsx)("td",{className:"confirmation-table-header first-column",children:(0,R.jsx)("strong",{children:"Departure date"})}),(0,R.jsx)("td",{className:"confirmation-table-header second-column",children:o.passenger.flightDetails[0].departureDate})]}),(0,R.jsxs)("tr",{className:"confirmation-table-row",children:[(0,R.jsx)("td",{className:"confirmation-table-header first-column",children:(0,R.jsx)("strong",{children:"Departure time"})}),(0,R.jsx)("td",{className:"confirmation-table-header second-column",children:o.passenger.flightDetails[0].departureTime})]}),(0,R.jsxs)("tr",{className:"confirmation-table-row",children:[(0,R.jsx)("td",{className:"confirmation-table-header first-column",children:(0,R.jsx)("strong",{children:"Arrival date"})}),(0,R.jsx)("td",{className:"confirmation-table-header second-column",children:o.passenger.flightDetails[0].arrivalDate})]}),(0,R.jsxs)("tr",{className:"confirmation-table-row",children:[(0,R.jsx)("td",{className:"confirmation-table-header first-column",children:(0,R.jsx)("strong",{children:"Arrival time"})}),(0,R.jsx)("td",{className:"confirmation-table-header second-column",children:o.passenger.flightDetails[0].arrivalTime})]}),(0,R.jsxs)("tr",{className:"confirmation-table-row",children:[(0,R.jsx)("td",{className:"confirmation-table-header first-column",children:(0,R.jsx)("strong",{children:"Email"})}),(0,R.jsx)("td",{className:"confirmation-table-header second-column",children:L?(0,R.jsx)("input",{type:"text",value:P.emailId,onChange:e=>K("emailId",e.target.value),defaultValue:o.passenger.emailId,style:{fontSize:"14px",width:"350px",height:"30px"}}):o.passenger.emailId})]}),(0,R.jsxs)("tr",{className:"confirmation-table-row",children:[(0,R.jsx)("td",{className:"confirmation-table-header first-column",children:(0,R.jsx)("strong",{children:"First Name"})}),(0,R.jsx)("td",{className:"confirmation-table-header second-column",children:L?(0,R.jsx)("input",{type:"text",value:P.firstName,onChange:e=>K("firstName",e.target.value),defaultValue:o.passenger.firstName,style:{fontSize:"14px",width:"350px",height:"30px"}}):o.passenger.firstName})]}),(0,R.jsxs)("tr",{className:"confirmation-table-row",children:[(0,R.jsx)("td",{className:"confirmation-table-header first-column",children:(0,R.jsx)("strong",{children:"Last Name"})}),(0,R.jsx)("td",{className:"confirmation-table-header second-column",children:L?(0,R.jsx)("input",{type:"text",value:P.lastName,onChange:e=>K("lastName",e.target.value),defaultValue:o.passenger.lastName,style:{fontSize:"14px",width:"350px",height:"30px"}}):o.passenger.lastName})]}),(0,R.jsxs)("tr",{className:"confirmation-table-row",children:[(0,R.jsx)("td",{className:"confirmation-table-header first-column",children:(0,R.jsx)("strong",{children:"Seat Number"})}),(0,R.jsx)("td",{className:"confirmation-table-header second-column",children:o.passenger.flightDetails[0].seat.seatNumber})]}),(0,R.jsxs)("tr",{className:"confirmation-table-row",children:[(0,R.jsx)("td",{className:"confirmation-table-header first-column",children:(0,R.jsx)("strong",{children:"Seat Class"})}),(0,R.jsx)("td",{className:"confirmation-table-header second-column",children:o.passenger.flightDetails[0].seat.seatClass})]}),(0,R.jsxs)("tr",{className:"confirmation-table-row",children:[(0,R.jsx)("td",{className:"confirmation-table-header first-column",children:(0,R.jsx)("strong",{children:"Total Travel Fare"})}),(0,R.jsx)("td",{className:"confirmation-table-header second-column",children:o.passenger.payment[0].totalTravelFair})]})]})}),(0,R.jsx)(u,{style:{margin:"10px 0"}})]}),(0,R.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:[(0,R.jsx)(p.A,{variant:"contained",color:"black",className:"action-button",onClick:()=>{e.history.push("/manage")},style:{backgroundColor:"black",color:"white",marginRight:"10px",display:z?"none":"block"},children:"Back to reservations"}),(0,R.jsx)(p.A,{variant:"contained",color:"primary",className:"action-button",onClick:()=>{F.getAllSeatsFromAFlight(S).then((e=>{B(e.data),M(!0),_(!0)}))},style:{backgroundColor:"black",color:"white",marginRight:"10px",display:z?"none":"block"},children:"Edit Reservation"}),(0,R.jsx)(p.A,{variant:"contained",color:"primary",className:"action-button",onClick:()=>{M(!1),_(!1);try{const e={bookingId:o.bookingId,arrival:o.arrival,passenger:{userId:o.passenger.userId,emailId:P.emailId?P.emailId:o.passenger.emailId,admin:0,firstName:P.firstName?P.firstName:o.passenger.firstName,lastName:P.lastName?P.lastName:o.passenger.lastName,phoneNumber:o.passenger.phoneNumber,flightDetails:[{flightNumber:o.passenger.flightDetails[0].flightNumber,departure:o.departure,arrival:o.arrival,departureDate:o.passenger.flightDetails[0].departureDate,arrivalDate:o.passenger.flightDetails[0].arrivalDate,departureTime:o.passenger.flightDetails[0].departureTime,arrivalTime:o.passenger.flightDetails[0].arrivalTime,seatAvailability:o.passenger.flightDetails[0].seatAvailability,seat:{seatNumber:o.passenger.flightDetails[0].seat.seatNumber,seatClass:o.passenger.flightDetails[0].seat.seatClass,price:o.passenger.flightDetails[0].seat.price,booked:!0}}],payment:[{paymentId:o.passenger.payment[0].paymentId,totalTravelFair:o.passenger.flightDetails[0].seat.price,flightNumber:o.passenger.flightDetails[0].flightNumber}]},flightNumber:o.passenger.flightDetails[0].flightNumber,departure:o.departure};console.log("updated reservation=> "+JSON.stringify(e)),D.A.updateReservation(a,t,e).then((e=>{console.log("update reservation",e.data),c(e.data)})),E.price>o.passenger.flightDetails[0].seat.price?J("Remaining balance will be credited to your account"):E.price<o.passenger.flightDetails[0].seat.price?J("Remaining balance will be debited from your account"):J("All changes are saved!"),U(!0)}catch(e){console.error("Error updating data:",e)}},style:{backgroundColor:"black",color:"white",marginRight:"10px",display:z?"block":"none"},children:"Save changes"}),(0,R.jsx)(p.A,{variant:"contained",color:"primary",className:"action-button",onClick:()=>{q(E.seatNumber,E.seatClass,E.price),M(!1),_(!1)},style:{backgroundColor:"black",color:"white",marginRight:"10px",display:z?"block":"none"},children:"Cancel Changes"}),(0,R.jsx)(p.A,{variant:"contained",color:"primary",className:"action-button",style:{backgroundColor:"black",color:"white"},onClick:()=>{m(!0)},children:"Delete Reservation"})]}),(0,R.jsx)(u,{style:{margin:"10px 0"}}),L&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)("div",{style:{textAlign:"center",marginBottom:"20px"},children:[(0,R.jsx)("br",{}),(0,R.jsx)("br",{}),(0,R.jsx)("br",{}),(0,R.jsx)(n.A,{variant:"h4",children:"Upgrade Seats"})]}),(0,R.jsx)(x.A,{component:i.A,children:(0,R.jsxs)(b.A,{children:[(0,R.jsx)(f.A,{children:(0,R.jsxs)(j.A,{children:[(0,R.jsx)(N.A,{style:{backgroundColor:"black",color:"white"},children:"Seat Number"}),(0,R.jsx)(N.A,{style:{backgroundColor:"black",color:"white"},children:"Seat Class"}),(0,R.jsx)(N.A,{style:{backgroundColor:"black",color:"white"},children:"Seat Price"}),(0,R.jsx)(N.A,{style:{backgroundColor:"black",color:"white"},children:"Action"})]})}),(0,R.jsx)(v.A,{children:T.filter((e=>!e.booked)).map(((e,a)=>(0,R.jsxs)(j.A,{children:[(0,R.jsx)(N.A,{children:e.seatNumber}),(0,R.jsx)(N.A,{children:e.seatClass}),(0,R.jsx)(N.A,{children:e.price}),(0,R.jsx)(N.A,{children:(0,R.jsx)(p.A,{variant:"contained",color:"primary",style:{backgroundColor:"black",color:"white"},onClick:()=>q(e.seatNumber,e.seatClass,e.price),children:"Add Seat"})})]},a)))})]})})]})]})}),(0,R.jsxs)(A.A,{open:d,onClose:H,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,R.jsx)(y.A,{className:"alert-title",id:"alert-dialog-title",children:" Confirm Delete "}),(0,R.jsx)(k.A,{children:(0,R.jsx)(n.A,{variant:"body1",children:"Are you sure you want to delete this reservation?"})}),(0,R.jsxs)(C.A,{style:{justifyContent:"center"},children:[(0,R.jsx)(p.A,{style:{backgroundColor:"black",color:"white"},onClick:()=>((a,t)=>{try{D.A.deleteReservation(a,t).then((a=>{g(!0),setTimeout((()=>{g(!1),e.history.push("/manage")}),1e3),m(!1)}))}catch(r){console.error("Error deleting reservation:",r),m(!1)}})(o.bookingId,o.passenger.userId),color:"primary",autoFocus:!0,children:"Yes"}),(0,R.jsx)(p.A,{onClick:H,color:"primary",style:{backgroundColor:"black",color:"white"},children:"No"})]})]}),(0,R.jsxs)(A.A,{open:h,onClose:()=>g(!1),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,R.jsx)(y.A,{className:"alert-title",id:"alert-dialog-title",children:" Success "}),(0,R.jsx)(k.A,{children:(0,R.jsx)(n.A,{variant:"body1",children:"Reservation deleted successfully!"})}),(0,R.jsx)(C.A,{style:{justifyContent:"center"},children:(0,R.jsx)(p.A,{style:{backgroundColor:"black",color:"white"},onClick:()=>g(!1),color:"primary",children:"Close"})})]}),(0,R.jsxs)(A.A,{open:W,onClose:G,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,R.jsx)(y.A,{className:"alert-title",id:"alert-dialog-title",children:"Changes Updated"}),(0,R.jsx)(k.A,{children:(0,R.jsx)(w.A,{id:"alert-dialog-description",children:Y})}),(0,R.jsx)(C.A,{style:{justifyContent:"center"},children:(0,R.jsx)(p.A,{style:{backgroundColor:"black",color:"white"},onClick:G,color:"primary",children:"OK"})})]})]})}},419:(e,a,t)=>{t.d(a,{A:()=>o});var r=t(8168),s=t(5043),l=t(7573),i=t(6187),n=s.forwardRef((function(e,a){return s.createElement(i.A,(0,r.A)({component:"p",variant:"body1",color:"textSecondary",ref:a},e))}));const o=(0,l.A)({root:{marginBottom:12}},{name:"MuiDialogContentText"})(n)},3867:(e,a,t)=>{t.d(a,{A:()=>c});var r=t(8168),s=t(45),l=t(5043),i=t(3024),n=t(7573),o=l.forwardRef((function(e,a){var t=e.classes,n=e.className,o=e.dividers,c=void 0!==o&&o,d=(0,s.A)(e,["classes","className","dividers"]);return l.createElement("div",(0,r.A)({className:(0,i.A)(t.root,n,c&&t.dividers),ref:a},d))}));const c=(0,n.A)((function(e){return{root:{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"8px 24px","&:first-child":{paddingTop:20}},dividers:{padding:"16px 24px",borderTop:"1px solid ".concat(e.palette.divider),borderBottom:"1px solid ".concat(e.palette.divider)}}}),{name:"MuiDialogContent"})(o)}}]);
//# sourceMappingURL=279.1ee0340a.chunk.js.map